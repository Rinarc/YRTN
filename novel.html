<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>小说阅读 - YRTN</title>
    <style>
        /* 继承主页主题色 */
        :root {
            --primary-color: #6366f1;
            --secondary-color: #8b5cf6;
        }

        /* 书籍选择器 */
        .book-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
            gap: 2rem;
            padding: 1rem;
        }

        .book-card {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease;
            cursor: pointer;
        }

        .book-card:hover {
            transform: translateY(-5px);
        }

        .book-cover {
            width: 100%;
            height: 320px;
            object-fit: cover;
            border-bottom: 3px solid var(--primary-color);
        }

        .book-info {
            padding: 1.2rem;
        }

        .book-title {
            color: var(--primary-color);
            margin-bottom: 0.5rem;
        }

        .book-author {
            color: #666;
            font-size: 0.9em;
        }

        .book-desc {
            margin-top: 1rem;
            color: #444;
            font-size: 0.95em;
            line-height: 1.5;
        }

        /* 继承主页按钮样式 */
        .btn {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white !important;
            padding: 0.8rem 1.5rem;
            border-radius: 6px;
            transition: transform 0.2s;
        }
    </style>
</head>
<body>
    <nav class="novel-nav">
        <h1>YRTN小说馆</h1>
        <div class="nav-links">
            <a href="../index.html" class="btn">返回首页</a>
        </div>
    </nav>

    <div class="container">
        <!-- 书籍选择网格 -->
        <div class="book-grid" id="bookGrid"></div>

        <!-- 阅读器容器（初始隐藏） -->
        <div class="reader-container" id="reader" style="display: none;">
            <!-- 原有阅读器内容 -->
        </div>
    </div>

    <script>
        // 加载书籍数据
        async function loadBooks() {
            const response = await fetch('books.json');
            return await response.json();
        }

        // 渲染书籍列表
        async function renderBooks() {
            const books = await loadBooks();
            const grid = document.getElementById('bookGrid');
            
            grid.innerHTML = books.map(book => `
                <div class="book-card" data-book-id="${book.id}">
                    <img src="${book.cover}" class="book-cover" alt="${book.title}封面">
                    <div class="book-info">
                        <h3 class="book-title">${book.title}</h3>
                        <p class="book-author">作者：${book.author}</p>
                        <p class="book-desc">${book.desc}</p>
                    </div>
                </div>
            `).join('');

            // 添加点击事件
            document.querySelectorAll('.book-card').forEach(card => {
                card.addEventListener('click', () => openBook(card.dataset.bookId));
            });
        }

        // 打开书籍
        async function openBook(bookId) {
            const books = await loadBooks();
            const book = books.find(b => b.id === bookId);
            
            // 隐藏选择器显示阅读器
            document.getElementById('bookGrid').style.display = 'none';
            document.getElementById('reader').style.display = 'block';
            
            // 初始化阅读器
            initReader(book);
        }

        // 初始化阅读器（原有逻辑调整）
        function initReader(book) {
            currentBook = book;
            currentChapter = parseInt(localStorage.getItem(`lastChapter_${book.id}`)) || 0;
            loadChapter();
        }

        // 其余原有阅读器逻辑保持不变...

        // 初始化
        renderBooks();
    </script>
</body>
</html>
