<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="YRTN">
    <title>YRTN VISION | Look to the future</title>
    <link rel="stylesheet" href="https://cdn.plyr.io/3.7.8/plyr.css">
    <link rel="stylesheet" href="main.css">
    
    <style>
    /* ======= å›¾ç‰‡å¯åŠ¨åŠ¨ç”» ======= */
    .splash-screen {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: #ffffff;
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 9999;
        opacity: 1;
        transition: opacity 0.8s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .splash-image {
        width: auto;
        height: auto;
        max-width: min(600px, 80%);
        max-height: 70vh;
        opacity: 0;
        transform: scale(0.9);
        animation: splashAnim 2s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        image-rendering: -webkit-optimize-contrast;
    }

    @keyframes splashAnim {
        0% {
            opacity: 0;
            transform: scale(0.8) rotate(-5deg);
        }
        30% {
            opacity: 1;
            transform: scale(1.05) rotate(2deg);
        }
        70% {
            opacity: 1;
            transform: scale(0.98) rotate(-1deg);
        }
        100% {
            opacity: 0;
            transform: scale(1.3) rotate(0deg);
        }
    }

    /* ======= å…¨å±€æ ·å¼ ======= */
    body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        background: #f8f9fa;
    }

    .main-header {
        background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
        color: white;
        padding: 1.5rem 0;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        position: relative;
        z-index: 100;
    }

    .logo {
        font-size: 2.2rem;
        font-weight: 700;
        letter-spacing: -0.5px;
        text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
    }

    .icon-button {
        position: absolute;
        top: 1.5rem;
        right: 1.5rem;
        width: 40px;
        height: 40px;
        transition: transform 0.2s ease;
    }

    .icon-button:hover {
        transform: scale(1.1);
    }

    .icon-button img {
        width: 100%;
        height: 100%;
        object-fit: contain;
    }

    /* ======= å…¬å‘Šç³»ç»Ÿ ======= */
    .overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.6);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 2000;
        backdrop-filter: blur(5px);
    }

    .announcement-modal {
        background: white;
        padding: 2rem;
        border-radius: 16px;
        width: min(90%, 560px);
        box-shadow: 0 8px 32px rgba(0,0,0,0.12);
        animation: modalSlideIn 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }

    @keyframes modalSlideIn {
        from { transform: translateY(20px); opacity: 0; }
        to { transform: translateY(0); opacity: 1; }
    }

    /* ======= é€šçŸ¥æ¨ªå¹… ======= */
    .notification-banner {
        background: #e3f2fd;
        color: #1976d2;
        padding: 12px 2rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
        box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        position: relative;
        z-index: 90;
    }

    .notification-close {
        background: none;
        border: none;
        font-size: 1.4rem;
        color: inherit;
        padding: 0 0.5rem;
        cursor: pointer;
        transition: opacity 0.2s;
    }

    .notification-close:hover {
        opacity: 0.8;
    }

    /* ======= å“åº”å¼è®¾è®¡ ======= */
    @media (max-width: 768px) {
        .logo { font-size: 1.8rem; }
        .icon-button { width: 36px; height: 36px; }
        .splash-image { max-width: 85%; }
        .announcement-modal { padding: 1.5rem; }
    }
    </style>
</head>

<body>
    <!-- å›¾ç‰‡å¯åŠ¨åŠ¨ç”» -->
    <div class="splash-screen">
        <img src="https://img.picgo.net/2025/05/19/knockout7bf0f08e38442e85.png" 
             class="splash-image" 
             alt="YRTN Logo"
             loading="eager">
    </div>

    <!-- é€šçŸ¥æ¨ªå¹… -->
    <div class="notification-banner" id="notificationBanner">
        <div class="notification-content">æ¬¢è¿è®¿é—®YRTN VISION ( Â´ï½¥á´—ï½¥` )</div>
        <button class="notification-close" onclick="closeNotification()">&times;</button>
    </div>

    <!-- å¤´éƒ¨ -->
    <header class="main-header">
        <div class="container">
            <h1 class="logo">YRTN VISION</h1>
            <a href="yrtnshort.html" class="icon-button" title="YRTN SHORT">
                <img src="https://img.picgo.net/2025/05/15/knockout571abe27b2621984.png" alt="YRTN SHORT" />
            </a>
            <a href="#" class="icon-button announcement-btn" title="æŸ¥çœ‹å…¬å‘Š" onclick="forceShowAnnouncement()">
                <img src="https://img.picgo.net/2025/05/16/knockout31c2995b964fae5a.png" alt="æŸ¥çœ‹å…¬å‘Š" />
            </a>
            <p class="subtitle">Look to the future</p>

            <!-- å…¬å‘Šå¼¹çª— -->
            <div class="overlay" id="announcementOverlay">
                <div class="announcement-modal">
                    <button class="close-btn" onclick="closeAnnouncement()">&times;</button>
                    <h2 style="color: #1a237e;">ğŸ‰ é‡è¦å…¬å‘Š</h2>
                    <div class="content">
                        <p style="color: #444;">å¾ˆé«˜å…´ä¸ºæ‚¨å¸¦æ¥ä»¥ä¸‹æ–°æ›´æ–°ï¼š</p>
                        <ul style="list-style: none; padding-left: 1.2rem;">
                            <li style="margin-bottom: 0.8rem;">
                                <span style="color: #4caf50;">âœ”</span> çŸ­è§†é¢‘åŠŸèƒ½å‡çº§ï¼æ”¯æŒé™éŸ³åˆ‡æ¢
                            </li>
                            <li style="margin-bottom: 0.8rem;">
                                <span style="color: #4caf50;">âœ”</span> æ–°å¢å…¬å‘Šç³»ç»Ÿ
                            </li>
                            <li>
                                <span style="color: #4caf50;">âœ”</span> æ€§èƒ½ä¼˜åŒ–æå‡
                            </li>
                        </ul>
                    </div>
                    <div class="preference" style="margin-top: 1.5rem;">
                        <label style="display: flex; align-items: center; gap: 0.5rem;">
                            <input type="checkbox" id="dontShowAgain" style="accent-color: #4caf50;">
                            <span style="color: #666;">ä¸ƒå¤©å†…ä¸å†æ˜¾ç¤º</span>
                        </label>
                        <button class="confirm-btn" 
                                onclick="closeAnnouncement()"
                                style="background: #4caf50; color: white; padding: 8px 24px; border-radius: 6px; border: none; margin-top: 1rem;">
                            æˆ‘çŸ¥é“äº†
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- ä¸»å†…å®¹ -->
    <main class="container layout-grid">
        <aside class="series-list" id="seriesList"></aside>
        <section class="main-content">
            <div class="player-container" style="border-radius: 12px; overflow: hidden; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
                <video id="player" playsinline controls style="width: 100%; height: auto;"></video>
            </div>
            <div class="episode-controls" style="margin: 1.5rem 0; display: flex; justify-content: center; gap: 1rem;">
                <button class="btn prev" 
                        onclick="changeEpisode(-1)"
                        style="background: #4caf50; color: white; padding: 8px 20px; border: none; border-radius: 6px;">
                    â† ä¸Šä¸€é›†
                </button>
                <span class="episode-counter" id="episodeCounter" style="color: #666;"></span>
                <button class="btn next" 
                        onclick="changeEpisode(1)"
                        style="background: #4caf50; color: white; padding: 8px 20px; border: none; border-radius: 6px;">
                    ä¸‹ä¸€é›† â†’
                </button>
            </div>
            <div class="series-info" id="seriesInfo" style="background: white; padding: 1.5rem; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.05);"></div>
            <div class="episode-list" id="episodeList" style="margin-top: 2rem;"></div>
        </section>
    </main>

    <!-- é¡µè„š -->
    <footer class="main-footer" style="margin-top: 3rem; padding: 2rem 0; background: #f5f5f5;">
        <div class="container">
            <p style="text-align: center; color: #666;">
                Â© 2025 YRTN VISION Â· 
                <a href="https://pages.github.com/" target="_blank" style="color: #4caf50; text-decoration: none;">GitHub Pagesé©±åŠ¨</a>
            </p>
        </div>
    </footer>

    <!-- è„šæœ¬ -->
    <script src="https://cdn.plyr.io/3.7.8/plyr.js"></script>
    <script src="main.js"></script>

    <script>
    // å¯åŠ¨åŠ¨ç”»æ§åˆ¶
    {
        let splashRemoved = false;
        const splashScreen = document.querySelector('.splash-screen');
        
        // é¢„åŠ è½½logoå›¾ç‰‡
        const splashImg = new Image();
        splashImg.src = 'https://img.picgo.net/2025/05/19/knockout7bf0f08e38442e85.png';
        splashImg.onload = () => {
            if(!splashRemoved) splashScreen.querySelector('img').style.opacity = 1;
        }

        // åŠ¨ç”»è®¡æ—¶å™¨
        setTimeout(() => {
            splashScreen.style.opacity = '0';
            setTimeout(() => {
                splashScreen.remove();
                splashRemoved = true;
                document.body.style.overflow = 'auto';
            }, 800);
        }, 2200);
    }

    // å…¬å‘Šç³»ç»Ÿ
    const announcement = {
        key: 'yr_announcement',
        expiration: 7 * 86400000,

        show() {
            if(!localStorage.getItem(this.key) || JSON.parse(localStorage.getItem(this.key)).expire < Date.now()) {
                document.getElementById('announcementOverlay').style.display = 'flex';
                document.body.style.overflow = 'hidden';
            }
        },

        hide() {
            const dontShow = document.getElementById('dontShowAgain').checked;
            if(dontShow) {
                localStorage.setItem(this.key, JSON.stringify({
                    expire: Date.now() + this.expiration
                }));
            }
            document.getElementById('announcementOverlay').style.display = 'none';
            document.body.style.overflow = 'auto';
        },

        forceShow() {
            localStorage.removeItem(this.key);
            this.show();
        }
    };

    // é€šçŸ¥æ¨ªå¹…
    function closeNotification() {
        document.getElementById('notificationBanner').style.display = 'none';
    }

    // äº‹ä»¶ç»‘å®š
    document.getElementById('announcementOverlay').addEventListener('click', e => {
        if(e.target === e.currentTarget) announcement.hide();
    });

    // åˆå§‹åŒ–æ’­æ”¾å™¨
    const player = new Plyr('#player', {
        controls: ['play', 'progress', 'current-time', 'mute', 'volume', 'settings', 'fullscreen'],
        settings: ['quality', 'speed'],
        ratio: '16:9'
    });
    </script>
</body>
</html>
